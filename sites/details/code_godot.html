<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Détail — Jonas Mercer</title>
  <link rel="stylesheet" href="../../assets/css/base.css" />
  <style>
    body { 
      margin: 0; 
      background: #0b0f14; color: #d7e2ea; display: grid; 
      place-items: center; 
      min-height: 100vh; 
    }

    .code-block {
    margin: 0;
    padding: 1rem 1.25rem;
    line-height: 1.5;
    font: 13.5px/1.6 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    color: #d7e2ea;
    background: rgba(0, 0, 0, 0.35);
    }
  </style>
</head>
<body>
  <div style="position: fixed; top: 20px; left: 20px;">
    <a class="btn" href="../transfer.html#fragments/programs.html#game-4">← Back</a></div>
  <div class="code-scroll">
          <pre class="code-block" aria-label="main.py"><code>
extends CharacterBody2D


const SPEED = 300.0
const JUMP_VELOCITY = -400.0
@onready var ap = $Sprit2D/AnimationPlayer
@onready var sprit = $Sprit2D
var isJumping = false

var is_jumping := false
var is_animating := false  
var can_attack := true     

const ATTACK_COOLDOWN = 0.5  

	


func _physics_process(delta: float) -> void:
	if is_animating == true:  
		return
		
	if is_on_floor():
		if (velocity.x > 1 || velocity.x < -1 ):
			ap.play("Run")
		else:
			ap.play("idle")
	else:
		velocity += get_gravity() * delta
		if velocity.y > 150:
			ap.play("fall")
		
		
		
	
	if Input.is_action_just_pressed("ui_accept") and is_on_floor():
		ap.play("jump")
		is_animating = true
		await get_tree().create_timer(0.24).timeout
		is_animating = false
		velocity.y = JUMP_VELOCITY
		
	
	
	var direction := Input.get_axis("ui_left", "ui_right")
	if direction:
		velocity.x = direction * SPEED
	else:
		velocity.x = move_toward(velocity.x, 0, 20)
		
	
	if Input.is_action_just_pressed("attack"):
		is_animating = true
		can_attack = false
		ap.play("attack")

		await ap.animation_finished

		is_animating = false
		await get_tree().create_timer(ATTACK_COOLDOWN).timeout
		can_attack = true
		
	move_and_slide()


	if direction != 0:
		sprit.flip_h = (direction == -1)



</code></pre>
        </div>
</body>
</html>
